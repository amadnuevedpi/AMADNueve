<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZAMPEN PRICE WATCH</title>
  <style>
    :root { --da-green: #0b6623; --light-yellow: #e0dba6; }
    body { margin: 0; font-family: Arial, sans-serif; background: #fff; }
    .top-strip { background-color: var(--da-green); height: 6px; width: 100%; }
    .yellow-strip { background-color: var(--light-yellow); height: 6px; width: 100%; }
    .header { display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px 30px; }
    .header-left { display: flex; align-items: center; gap: 15px; }
    .header-left img { height: 60px; }
    .address { margin-left: 15px; color: #000; font-size: 14px; line-height: 1.4; }
    .address strong { font-size: 16px; }
    .header-right { display: flex; align-items: center; }
    .search-box input { padding: 6px 10px; border: 2px solid var(--da-green); border-radius: 4px 0 0 4px; outline: none; }
    .search-box button { padding: 6px 12px; border: 2px solid var(--da-green); background: var(--da-green); color: white; border-radius: 0 4px 4px 0; cursor: pointer; font-weight: bold; }
    .search-box input:focus, .search-box button:hover { box-shadow: 0 0 6px rgba(11,102,35,0.6); }
    .title-bar { background: var(--light-yellow); text-align: center; min-height: 44px; display: flex; align-items: center; justify-content: center; }
    .title-bar h1 { margin: 0; font-size: 22px; color: #000; font-weight: 900; letter-spacing: 1px; }
    .navbar { display: flex; justify-content: flex-end; align-items: center; background-color: var(--da-green); box-shadow: 0 2px 6px rgba(0,0,0,0.15); padding: 0 20px; min-height: 44px; position: relative; z-index: 1000; }
    .navbar button { background: var(--da-green); border: none; color: white; font-size: 13px; margin: 0 4px; cursor: pointer; padding: 6px 12px; border-radius: 4px; transition: background 0.18s; }
    .navbar button:hover { background: #228b22; }
    .navbar button.active { background: #228b22; }
    .submenu {
  display: none;
  position: absolute;
  background: var(--da-green);
  padding: 6px;
  border-radius: 6px;
  z-index: 9999;
  box-shadow: 0 6px 14px rgba(0,0,0,0.2);
}

/* Buttons inside submenu */
.submenu button {
  display: block;
  width: 220px;
  margin: 4px 0;
  text-align: left;
  background: var(--da-green);
  border: none;
  padding: 6px 10px;
  color: white;
  cursor: pointer;
  font-size: 13px;
}

/* Hover/Active effect */
.submenu button:hover,
.submenu button.active {
  background: #228b22;
}

/* Nested (sub-submenu) styling */
.nested-submenu {
  display: none;
  background: #228b22;
  margin-left: 10px;
  border-radius: 4px;
  padding: 4px;
}

.nested-submenu button {
  width: 200px;
  background: #2fa92f;
}

.nested-submenu button:hover {
  background: #e0dba6;
}
    .iframe-wrapper { width: 850px; height: 650px; overflow: hidden; position: relative; border: 1px solid var(--da-green); margin: 20px auto; z-index: 1; border-radius: 6px; display:none; }
    .iframe-wrapper iframe { position: absolute; top: -140px; left: -345px; width: 1200px; height: 900px; border: none; z-index: 1; }
    .footer-logo { display: flex; justify-content: flex-end; padding: 10px 30px 0 0; }
    .footer-logo img { height: 80px; }
    footer { background-color: var(--da-green); color: white; padding: 0 30px; min-height: 44px; display: flex; align-items: center; text-align: left; font-size: 14px; }
    .footer-left { font-size: 14px; font-style: italic; font-weight: bold; }
    .footer-left a { color: #fff; text-decoration: none; margin-right: 15px; }

    /* Home Page Styling */
    .section-title {
      background: var(--light-yellow);
      padding: 8px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
    }
   .datetime-display {
    text-align: center;
    color: var(--da-green);
    font-size: 13px;
    font-weight: bold;
    margin-top: 6px;
    }

    .main-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin: 20px; }
    .top-stories { border: 1px solid var(--da-green); border-radius: 6px; padding: 10px; }
    .top-stories h3 { background: var(--da-green); color: white; margin: -10px -10px 10px -10px; padding: 6px; border-radius: 6px 6px 0 0; }
    .top-stories ul { list-style: none; padding: 0; margin: 0; }
    .top-stories li { margin-bottom: 10px; font-size: 14px; }
    .amad-action { border: 1px solid var(--da-green); border-radius: 6px; padding: 10px; text-align: center; }
    .amad-action h3 { background: var(--da-green); color: white; margin: -10px -10px 10px -10px; padding: 6px; border-radius: 6px 6px 0 0; }
    .amad-action img { max-width: 100%; border-radius: 4px; margin-bottom: 10px; }

    @media (max-width: 900px) {
      .iframe-wrapper { width: 95%; height: 500px; }
      .header-left img { height: 48px; }
      .footer-logo img { height: 60px; }
      .main-grid { grid-template-columns: 1fr; }
      .carousel-item { min-width: 220px; max-width: 220px; }
    }
  </style>
</head>
<body>
  <div class="top-strip"></div>
  <div class="yellow-strip"></div>
  <div class="header">
    <div class="header-left">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/DA-AMAD-BP-logos/main/bag%20pil.png" alt="Bagong Pilipinas">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/DA-AMAD-BP-logos/main/da.png" alt="Department of Agriculture">
      <div class="address">
        <strong>Department of Agriculture</strong><br><strong>AGRIBUSINESS MARKETING ASSISTANCE DIVISION</strong><br> Regional Field Office IX<br> Lenienza St., Pagadian City
      </div>
    </div>
    <div class="header-right">
      <div class="search-box">
        <input type="text" placeholder="Search...">
        <button>üîç</button>
        <div id="datetime" class="datetime-display"></div>
      </div>
    </div>
  </div>

  <div class="title-bar">
    <h1>ZAMPEN PRICE WATCH</h1>
  </div>

  <!-- Navbar -->
<div class="navbar">

  <!-- HOME Main -->
  <button onclick="setActive(this); loadReport('')" class="active">HOME</button>

  <button id="aboutAmadBtn" onclick="toggleAmadSubmenu(event)">ABOUT AMAD ‚ñæ</button>
   <!-- AMAD Submenu -->
  <div id="amadSubmenu" class="submenu" aria-hidden="true">
    <!-- APS -->
    <button class="has-children" onclick="toggleNestedSubmenu(event, 'apsSubmenu')">
      Agribusiness Promotion Section (APS) ‚ñæ
    </button>
    <div id="apsSubmenu" class="nested-submenu">
      <button onclick="setSubActive(this); loadReport('')">Sagip Saka</button>
      <button onclick="setSubActive(this); loadReport('')">Young Farmers Challenge (YFC)</button>
    </div>

    <!-- AISS -->
    <button class="has-children" onclick="toggleNestedSubmenu(event, 'aissSubmenu')">
      Agribusiness Industry Support Section (AISS) ‚ñæ
    </button>
    <div id="aissSubmenu" class="nested-submenu">
      <button onclick="setSubActive(this); loadReport('')">FFEDIS</button>
      <button onclick="setSubActive(this); loadReport('')">Digital Agriculture Project (DAP)</button>
    </div>

    <!-- MDS -->
    <button class="has-children" onclick="toggleNestedSubmenu(event, 'mdsSubmenu')">
      Market Development Section (MDS) ‚ñæ
    </button>
    <div id="mdsSubmenu" class="nested-submenu">
      <button onclick="setSubActive(this); loadReport('')">Kadiwa ng Pangulo</button>
      <button onclick="setSubActive(this); loadReport('')">Kadiwa Pop-Up Store</button>
    </div>
  </div>
  
  <button onclick="window.open('https://script.google.com/macros/s/AKfycbySxf-4RG-CjIPHuAnS6K-lq9gCiogm6Cf-1knA9bLIgl2rK4QdxOCii4WQ-836-KOD/exec','_blank')">
    UPDATE PRICES
  </button>
  
  <button id="priceStatsBtn" onclick="toggleSubmenu(event)">PRICE STATISTICS ‚ñæ</button>

  
  <!-- PRICE STATISTICS Submenu -->
  <div id="submenu" class="submenu" aria-hidden="true">
    <button onclick="setSubActive(this); loadReport('https://lookerstudio.google.com/embed/reporting/4b4b037d-9610-4abb-8888-ffb8e8bbd4e4/page/p_pknflxucwd')">View Date</button>
    <button onclick="setSubActive(this); loadReport('https://lookerstudio.google.com/embed/reporting/4b4b037d-9610-4abb-8888-ffb8e8bbd4e4/page/p_kbvahx3cwd')">View Market</button>
    <button onclick="setSubActive(this); loadReport('https://lookerstudio.google.com/embed/reporting/4b4b037d-9610-4abb-8888-ffb8e8bbd4e4/page/p_pxqisx3cwd')">View Commodity</button>
  </div>

  <button onclick="setActive(this); loadDPI('https://docs.google.com/spreadsheets/d/e/2PACX-1vT61jbCC9Ufnduo2eIBWV9Lhx5j76r2T0XUrQv0v9jY59yKbEhnTz8g46MSLIkRR3L_iUkAlMFMG1dL/pubhtml?widget=false&chrome=false')">
    DAILY PRICE INDEX (DPI)
  </button>
  <button onclick="setActive(this); loadReport('')">PRICE ADVISORY</button>
  <button onclick="setActive(this); loadReport('')">DOWNLOADS</button>
</div>

  <!-- Home Content -->
  <div id="homeContent" class="home-content" style="display:block;">
 

  <!-- AMAD Ganap -->
<div class="amad-ganap">
  <h2 class="section-title">AMAD Ganap - Alamin at Monitor ang mga Aktibidad Dito</h2>
  <div class="carousel" id="carousel"></div>
</div>

<style>
  /* üé† Carousel Wrapper */
  .carousel-container {
    position: relative;
    overflow: hidden;
    padding: 20px 0;
    background: #f7f9fb;
  }

  /* üé† Carousel Track */
  .carousel {
    display: flex;
    gap: 18px;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    padding: 0 50px;
    scroll-snap-type: x mandatory;
  }

  .carousel::-webkit-scrollbar {
    display: none;
  }

  /* üé¥ Carousel Item */
  .carousel-item {
    flex: 0 0 450px; /* Slightly wider */
    border-radius: 12px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    background: #fff;
    scroll-snap-align: start;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .carousel-item:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.18);
  }

  /* üñºÔ∏è Larger Image */
  .carousel-item img {
    width: 100%;
    height: 360px; /* Increased from 180px */
    object-fit: cover;
    display: block;
  }

  /* üìù Overlay Caption */
  .carousel-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(11, 102, 35, 0.9), rgba(11, 102, 35, 0.4));
    color: #fff;
    font-weight: 600;
    text-align: center;
    padding: 16px 10px;
    font-size: 16px;
  }

  /* üìÑ Description (Optional) */
  .carousel-desc {
    padding: 12px 14px;
    font-size: 13px;
    line-height: 1.5;
    color: #333;
    background: #fff;
  }

  /* ‚¨ÖÔ∏è‚û°Ô∏è Nav Arrows */
  .carousel-btn {
    position: absolute;
    top: 45%;
    transform: translateY(-50%);
    background: var(--da-green, #0b6623);
    color: white;
    border: none;
    border-radius: 50%;
    width: 42px;
    height: 42px;
    cursor: pointer;
    z-index: 10;
    font-size: 20px;
    opacity: 0.9;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  }

  .carousel-btn:hover {
    background: #228b22;
  }

  .carousel-btn.prev {
    left: 10px;
  }

  .carousel-btn.next {
    right: 10px;
  }
</style>

<!-- ‚úÖ Carousel HTML -->
<div class="carousel-container">
  <button class="carousel-btn prev" onclick="scrollCarousel(-1)">&#10094;</button>

  <div class="carousel" id="carousel">
    <div class="carousel-item">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/PICTURES/main/522638641_122206854878048874_3398401955530084323_n.jpg" alt="Agriculture">
      <div class="carousel-caption">Agribusiness Promotion</div>
      <div class="carousel-desc">Empowering farmers through enterprise development and market linkages.</div>
    </div>

    <div class="carousel-item">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/PICTURES/main/P202.jpg" alt="Market">
      <div class="carousel-caption">Market Development</div>
      <div class="carousel-desc">Affordable Rice for Public Consumers.</div>
    </div>

    <div class="carousel-item">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/PICTURES/main/Young.jpg" alt="Farmers">
      <div class="carousel-caption">Young Farmers Challenge</div>
      <div class="carousel-desc">Encouraging youth participation in agriculture innovation and agripreneurship.</div>
    </div>

    <div class="carousel-item">
      <img src="https://raw.githubusercontent.com/amadnuevedpi/PICTURES/main/DAP.jpg" alt="Technology">
      <div class="carousel-caption">Digital Agriculture Project</div>
      <div class="carousel-desc">Harnessing ICT to improve agricultural efficiency and productivity.</div>
    </div>
  </div>

  <button class="carousel-btn next" onclick="scrollCarousel(1)">&#10095;</button>
</div>

<script>
  /** üåÄ Carousel Scroll Control (Dynamic Width) **/
  function scrollCarousel(direction) {
    const carousel = document.getElementById('carousel');
    if (!carousel) return;

    // Get first item width + gap
    const firstItem = carousel.querySelector('.carousel-item');
    if (!firstItem) return;

    const itemStyle = window.getComputedStyle(firstItem);
    const itemWidth = firstItem.offsetWidth;
    const gap = parseFloat(window.getComputedStyle(carousel).gap || 0);

    // Scroll exactly one item width per click
    const scrollAmount = itemWidth + gap;

    carousel.scrollBy({
      left: direction * scrollAmount,
      behavior: 'smooth'
    });
  }

  /** üîÅ Auto-scroll every 6 seconds **/
  let autoScroll;
  function startAutoScroll() {
    autoScroll = setInterval(() => scrollCarousel(1), 6000);
  }
  function stopAutoScroll() {
    clearInterval(autoScroll);
  }

  // Pause auto-scroll on hover (optional)
  const carouselEl = document.getElementById('carousel');
  if (carouselEl) {
    carouselEl.addEventListener('mouseenter', stopAutoScroll);
    carouselEl.addEventListener('mouseleave', startAutoScroll);
  }

  // Start auto-scroll
  startAutoScroll();
</script>

    


  <!-- Main Content Area -->
  <div class="main-grid">

    <!-- Top Stories -->
    <div class="top-stories">
      <h3>TOP STORIES</h3>
      <ul class="stories-list">
        <li>
          <strong>Training on Coco Coir Product Processing niadtong Septembre 15-16, 2025</strong><br>
          <small>September 15-16, 2025</small>
        </li>
        <li>
          <strong>ùó•ùó≤ùó¥ùó∂ùóºùóªùóÆùóπ ùóôùóøùòÇùó∂ùòÅ ùóÆùóªùó± ùó©ùó≤ùó¥ùó≤ùòÅùóÆùóØùóπùó≤ ùó£ùóøùóºùó∫ùóºùòÅùó∂ùóºùóª ùóÆùóªùó± ùóòùòÖùóΩùóºùòÄùó∂ùòÅùó∂ùóºùóª</strong><br>
          <small>September 23, 2025</small>
        </li>
        <li>
          <strong>Php84-M Cacao Processing & Marketing Enterprise of MIFAMCO</strong><br>
          <small>September 16, 2025</small>
        </li>
        <li>
          <strong>Training on Crafting of Project Proposal.</strong><br>
          <small>September 18-19, 2025</small>
        </li>
        <li>
          <strong>ùóóùó≤ùóΩùóÆùóøùòÅùó∫ùó≤ùóªùòÅ ùóºùó≥ ùóîùó¥ùóøùó∂ùó∞ùòÇùóπùòÅùòÇùóøùó≤‚Äìùóîùó†ùóîùóó ug sa ùó¢ùó≥ùó≥ùó∂ùó∞ùó≤ ùóºùó≥ ùòÅùóµùó≤ ùó£ùóøùóºùòÉùó∂ùóªùó∞ùó∂ùóÆùóπ ùóîùó¥ùóøùó∂ùó∞ùòÇùóπùòÅùòÇùóøùó∂ùòÄùòÅ, ang ùó£ùüÆùü¨ ùó•ùó∂ùó∞ùó≤ ùó£ùóøùóºùó∑ùó≤ùó∞ùòÅ</strong><br>
          <small>September 18, 2025</small>
        </li>
      </ul>
    </div>

    <!-- Featured AMAD Action -->
    <div class="amad-action">
      <h3>SUCCESS STORIES</h3>
      <img src="https://raw.githubusercontent.com/amadnuevedpi/PICTURES/main/SuccesStory.jpg"
           alt="AMAD in Action" style="max-width:100%; border-radius:6px;">
      <p><strong>The Secret Behind Success</strong></p>
    </div>

  </div><!-- end main-grid -->

</div><!-- end homeContent -->


<style>
  /* Grid for Top Stories + AMAD Action */
  .main-grid {
    display: grid;
    grid-template-columns: 1fr 2fr; /* Top stories wider, AMAD action smaller */
    gap: 20px;
    margin-top: 20px;
  }

  @media (max-width: 768px) {
    .main-grid {
      grid-template-columns: 1fr; /* Stack on mobile */
    }
  }

  .stories-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .stories-list li {
    background: #f9f9f9;
    padding: 12px 16px;
    margin-bottom: 10px;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.2s ease-in-out;
    cursor: pointer;
  }

  .stories-list li:hover {
    background: #e6f4ea;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  }

  .stories-list strong {
    display: block;
    margin-bottom: 4px;
  }

  .stories-list small {
    color: #666;
    font-size: 0.9em;
  }

  .amad-action {
    background: #f9f9f9;
    padding: 16px;
    border-radius: 6px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  }
</style>


<!-- Locker Studio iframe -->
<div class="iframe-wrapper">
  <iframe id="reportFrame"></iframe>
</div>

<!-- ‚úÖ DPI Wrapper (embedded app) -->
<div class="dpi-iframe-wrapper"
     style="width:100%; max-width:1000px; height:760px; margin:20px auto;
            border:1px solid var(--da-green); display:none; border-radius:6px; overflow:hidden;">
  <iframe id="dpiFrame" style="width:100%; height:100%; border:none;"></iframe>
</div>


  <div class="footer-logo">
    <img src="https://raw.githubusercontent.com/amadnuevedpi/DA-AMAD-BP-logos/main/ZAMPEN%20VINTA1.png" alt="AMAD ZamPen Logo">
  </div>

  <div class="yellow-strip"></div>

  <footer>
    <div class="footer-left">
      <a href="https://www.facebook.com/amadrfo9" target="_blank" rel="noopener">Facebook: AMAD RFO IX</a>
      <a href="mailto:amadnueve@gmail.com">Email: amadnueve@gmail.com</a>
    </div>
  </footer>

  <script>
/** ‚úÖ Toggle PRICE STATISTICS Submenu */
function toggleSubmenu(evt) {
  evt.stopPropagation();
  const btn = evt.currentTarget;
  const submenu = document.getElementById('submenu');
  const navbar = document.querySelector('.navbar');

  // Toggle visibility
  if (submenu.style.display === 'block') {
    submenu.style.display = 'none';
    submenu.setAttribute('aria-hidden', 'true');
    return;
  }

  // Position submenu below button
  const btnRect = btn.getBoundingClientRect();
  const navRect = navbar.getBoundingClientRect();
  const left = btnRect.left - navRect.left;
  const top = btnRect.bottom - navRect.top + 6;
  submenu.style.left = left + 'px';
  submenu.style.top = top + 'px';
  submenu.style.display = 'block';
  submenu.setAttribute('aria-hidden', 'false');
}

/** ‚úÖ Set Active Navbar Button */
function setActive(button) {
  document.querySelectorAll('.navbar button').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.submenu button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
}

/** ‚úÖ Set Active Submenu Button */
function setSubActive(button) {
  document.querySelectorAll('.navbar button').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.submenu button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
}

/* ----------------------------- */
/* ‚úÖ NEW ABOUT AMAD FUNCTIONS   */
/* ----------------------------- */

/** ‚úÖ Toggle ABOUT AMAD main submenu */
function toggleAmadSubmenu(event) {
  event.stopPropagation();
  const submenu = document.getElementById('amadSubmenu');
  const btn = event.currentTarget;
  const navbar = document.querySelector('.navbar');

  // Toggle display
  if (submenu.style.display === 'block') {
    submenu.style.display = 'none';
    submenu.setAttribute('aria-hidden', 'true');
    return;
  }

  // Position below ABOUT AMAD button
  const btnRect = btn.getBoundingClientRect();
  const navRect = navbar.getBoundingClientRect();
  const left = btnRect.left - navRect.left;
  const top = btnRect.bottom - navRect.top + 6;

  submenu.style.left = left + 'px';
  submenu.style.top = top + 'px';
  submenu.style.display = 'block';
  submenu.setAttribute('aria-hidden', 'false');
}

/** ‚úÖ Toggle nested APS/AISS/MDS sections */
function toggleNestedSubmenu(event, id) {
  event.stopPropagation();
  const submenu = document.getElementById(id);
  const isOpen = submenu.style.display === 'block';

  // Close all first
  document.querySelectorAll('.nested-submenu').forEach(el => (el.style.display = 'none'));

  // Then toggle selected
  submenu.style.display = isOpen ? 'none' : 'block';
  submenu.setAttribute('aria-hidden', isOpen ? 'true' : 'false');
}

/** ‚úÖ Close both ABOUT AMAD and PRICE STATISTICS when clicking outside */
window.addEventListener('click', e => {
  // ABOUT AMAD
  const amadBtn = document.getElementById('aboutAmadBtn');
  const amadSub = document.getElementById('amadSubmenu');
  if (
    amadSub &&
    amadSub.style.display === 'block' &&
    !amadBtn.contains(e.target) &&
    !amadSub.contains(e.target)
  ) {
    amadSub.style.display = 'none';
  }

  // PRICE STATISTICS
  const priceBtn = document.getElementById('priceStatsBtn');
  const priceSub = document.getElementById('submenu');
  if (
    priceSub &&
    priceSub.style.display === 'block' &&
    !priceBtn.contains(e.target) &&
    !priceSub.contains(e.target)
  ) {
    priceSub.style.display = 'none';
  }
});

  /** ‚úÖ Load Report or Home */
  function loadReport(url) {
    const iframeWrapper = document.querySelector(".iframe-wrapper");
    const homeContent = document.getElementById("homeContent");
    const dpiWrapper = document.querySelector(".dpi-iframe-wrapper");
    const frame = document.getElementById("reportFrame");

    // If no URL ‚Üí show Home
    if (!url || url.trim() === "") {
      homeContent.style.display = "block";
      iframeWrapper.style.display = "none";
      dpiWrapper.style.display = "none";

      localStorage.setItem("activeSection", "home");
      return;
    }

    // Otherwise show report
    homeContent.style.display = "none";
    dpiWrapper.style.display = "none";
    iframeWrapper.style.display = "block";

    frame.src = url;
    localStorage.setItem("activeSection", "report");
    localStorage.setItem("reportFrameUrl", url);

    // Hide submenu if open
    const submenu = document.getElementById('submenu');
    submenu.style.display = "none";
    submenu.setAttribute("aria-hidden", "true");
  }

  /** ‚úÖ Load Daily Price Index App */
  function loadDPI() {
    const iframeWrapper = document.querySelector(".dpi-iframe-wrapper");
    const homeContent = document.getElementById("homeContent");
    const reportWrapper = document.querySelector(".iframe-wrapper");

    // Hide others
    homeContent.style.display = "none";
    reportWrapper.style.display = "none";

    // Show DPI
    iframeWrapper.style.display = "block";

    // Load only once
    const dpiFrame = document.getElementById("dpiFrame");
    if (!dpiFrame.src) {
      dpiFrame.src = "https://amadnuevedpi.github.io/DPI-Report/dpireport.html";
    }

    // Save state
    localStorage.setItem("activeSection", "dpi");
    localStorage.setItem("dpiFrameUrl", dpiFrame.src);

    // Hide submenu
    const submenu = document.getElementById('submenu');
    if (submenu) {
      submenu.style.display = 'none';
      submenu.setAttribute('aria-hidden', 'true');
    }
  }

  /** ‚úÖ Hide submenu when clicking outside */
  window.addEventListener('click', function (e) {
    const submenu = document.getElementById('submenu');
    if (submenu && submenu.style.display === 'block') {
      const priceBtn = document.getElementById('priceStatsBtn');
      if (!priceBtn.contains(e.target) && !submenu.contains(e.target)) {
        submenu.style.display = 'none';
        submenu.setAttribute('aria-hidden', 'true');
      }
    }
  });

  /** ‚úÖ Restore Active State on Reload */
  document.addEventListener("DOMContentLoaded", function () {
    const homeContent = document.getElementById("homeContent");
    const dpiWrapper = document.querySelector(".dpi-iframe-wrapper");
    const iframeWrapper = document.querySelector(".iframe-wrapper");
    const dpiFrame = document.getElementById("dpiFrame");
    const reportFrame = document.getElementById("reportFrame");

    const lastState = localStorage.getItem("activeSection");

    if (lastState === "dpi") {
      homeContent.style.display = "none";
      iframeWrapper.style.display = "none";
      dpiWrapper.style.display = "block";
      const lastUrl = localStorage.getItem("dpiFrameUrl");
      if (lastUrl) dpiFrame.src = lastUrl;
    } else if (lastState === "report") {
      homeContent.style.display = "none";
      dpiWrapper.style.display = "none";
      iframeWrapper.style.display = "block";
      const lastUrl = localStorage.getItem("reportFrameUrl");
      if (lastUrl) reportFrame.src = lastUrl;
    } else {
      // Default ‚Üí Home
      homeContent.style.display = "block";
      iframeWrapper.style.display = "none";
      dpiWrapper.style.display = "none";
    }
  });

// ‚úÖ Live Date & Time Display
function updateDateTime() {
  const dtElem = document.getElementById("datetime");
  if (!dtElem) return;

  const now = new Date();
  const options = {
    year: "numeric", month: "long", day: "numeric",
    hour: "2-digit", minute: "2-digit", second: "2-digit",
    hour12: true,
    timeZone: "Asia/Manila"
  };
  dtElem.textContent = new Intl.DateTimeFormat("en-PH", options).format(now);
}

// Update every second
updateDateTime();
setInterval(updateDateTime, 1000);

  </script>
</body>
</html>








